

<style>
.Vacancy {
    height: 0.28rem;
    background-color: #f2f2f2;
}

.choice {
    height: 0.96rem;
    padding: 0px 0.28rem;
    background-color: #fff;
}

.yd-checkbox-text {
    display: none;
}

.mars {
    color: #3d3d40;
    font-weight: 700;
    width: 2.94rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 14px;
}

.choice img {
    width: 0.48rem;
    height: 0.48rem;
}

.coupons {
    color: #ff4500;
    font-weight: 700;
    border: 1px solid #ff4500;
    border-radius: 0.1rem;
    padding: 0.02rem 0.06rem;
    font-size: 0.28rem;
}

.trade {
    background-color: #fff;
    border-top: 1px solid #f2f2f2;
    padding: 0.24rem;
}

.trade .Commodity {
    width: 100px;
    height: 100px;
    margin-right: 0.16rem;
}

.multitool {
    margin-bottom: 0.2rem;
}

.multitool .introduce {
    color: #3d3d40;
    font-weight: 700;
    width: 80%;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    overflow: hidden;
    font-size: 0.24rem;
}

.multitool_l {
    margin-bottom: 0.68rem;
}

.specification {
    color: #96989e;
    font-size: 0.2rem;
    margin-bottom: 0.28rem;
    height: 0.28rem;
}

.v-spinner>input {
    border-left: 0.02rem solid #eae8e8;
    border-right: 0.02rem solid #eae8e8;
}

.v-spinner>a {
    background-color: #fff;
}

.trade .quantity {
    width: 2rem;
    height: 0.4rem;
    color: #fff;
    font-size: 0.24rem;
    font-weight: 700;
    background: rgba(000, 000, 000, 0.6);
    position: absolute;
    bottom: 0px;
    left: 0;
    text-align: center;
    line-height: 0.4rem;
}

.only {
    position: relative;
}

.viewnow {
    color: #ff4500;
    border: 0.02rem solid #ff4500;
    border-radius: 0.04rem;
    padding: 0.06rem 0px;
    font-size: 0.28rem;
    text-align: center;
}

.flash_sale {
    width: 2rem;
    height: 2rem;
    font-size: 0.24rem;
    font-weight: 700;
    background-color: rgba(255, 255, 255, 0.6);
    position: absolute;
    bottom: 0.06rem;
    left: 0;
}

.flash_sale img {
    margin: 0.36rem 0 0 0.36rem;
}

.tvmall {
    font-size: 0.24rem;
    color: #3d3d40;
    font-weight: 700;
    margin-right: 0.08rem;
}

.no_more {
    font-size: 14px;
    color: #c2c4cc;
    text-align: center;
    padding: 14px 0 24px 0;
    border: 1px solid #dcdde0;
}

.subtotal {
    font-size: 0.24rem;
    color: #3d3d40;
    font-weight: 700;
    text-align: center;
}

.Out {
    height: 0.96rem;
    padding-left: 0.28rem;
    background-color: #fff;
    position: fixed;
    bottom: 1.2rem;
    width: 100%;
}

.Oheck {
    background: linear-gradient(to right, #ff7800, #ff4500);
    color: #fff;
    font-size: 0.32rem;
    text-align: center;
    padding: 0.18rem 5%;
}

.outl {
    background: linear-gradient(to right, #ff7800, #ff4500);
}

.Check_order {
    margin: 0 0.36rem;
}

.Check {
    text-align: center;
    font-size: 0.32rem;
    color: #3d3d40;
    margin: 0.36rem 0;
}

.Possible {
    text-align: left;
    font-size: 0.28rem;
    color: #6d6e75;
    margin-bottom: 0.28rem;
}

.Order {
    text-align: left;
    font-size: 0.28rem;
    color: #6d6e75;
    margin-bottom: 0.08rem;
}

.again {
    text-align: left;
    font-size: 0.28rem;
    color: #6d6e75;
    margin: 0.28rem 0 0.48rem 0;
}

.Done {
    padding: 0.2rem 0px;
    font-size: 16px;
    color: #ff4500;
    border-top: 0.02rem solid #f2f2f2;
    text-align: center;
}

.yd-popup-center.yd-popup-show {
    border-radius: 0.2rem;
}

.yd-btn-primary {
    background-color: #fff;
}

.remove {
    font-size: 0.28rem;
    color: #6d6e73;
    padding: 10% 19% !important;
    text-align: center;
}

.undock {
    border-left: 0.02rem solid #f2f2f2;
}










/* 优惠券 */

.variation {
    height: 0.96rem;
    font-size: 0.28rem;
    color: #3d3d40;
    border-bottom: 0.02rem solid #f2f2f2;
    padding: 0 0.28rem;
    background-color: #fff;
}

.division {
    height: 0.28rem;
    background-color: #f2f2f2;
}

.mars {
    font-size: 0.28rem;
    color: #6d6e73;
    text-align: center;
    line-height: 0.96rem;
}

.close {
    font-size: 0.4rem;
    color: #6d6e73;
    padding-right: 0.28rem;
    background-color: #fff;
}

.hint {
    font-size: 0.28rem;
    color: #ff7800;
    padding-left: 0.28rem;
    background-color: #ffe4cc;
    line-height: 0.62rem;
}

.promotion_code {
    padding: 0 0.28rem;
    background-color: #f2f2f2;
}

.setting {
    width: 40%;
    background: linear-gradient(to right, #ff7800, #ff4500);
    text-align: center;
    padding: 0.2rem 0 0.16rem 0;
    margin-right: 0.16rem;
}

.Shippings {
    font-size: 0.28rem;
    ;
    color: #fff;
    line-height: 0.36rem;
}

.setting .prices {
    font-size: 0.28rem;
    ;
    color: #fff;
    margin-bottom: 0.08rem;
}

.setting .more {
    width: 73%;
    font-size: 0.2rem;
    color: #fff;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 0.32rem;
    padding: 0.06rem 0.14rem;
}

.promotion_code .scope {
    font-size: 0.24rem;
    color: #3d3d40;
    line-height: 0.32rem;
    margin-bottom: 0.08rem;
    margin-top: 0.28rem;
}

.promotion_code .apply {
    font-size: 0.28rem;
    color: #3d3d4e;
    line-height: 0.36rem;
    margin-bottom: 0.44rem;
}

.promotion_code .validity {
    font-size: 0.28rem;
    color: #96989e;
    line-height: 0.36rem;
    padding-bottom: 0.2rem;
}

.yd-popup-bottom {
    overflow-y: scroll;
}

.identification {
    height: 35px;
    text-align: right;
    position: relative;
}

.identification img {
    width: 1.48rem;
    height: 1.48rem;
    position: absolute;
    bottom: 2%;
    right: 2%;
    z-index: 1;
}

.yd-checkbox-icon {
    z-index: 0 !important;
}

.yd-popup-center.yd-popup-show {
    background-color: #fff;
}

.back {
    background: url(../../assets/images/not_refactoring/cart_image_empty.png) no-repeat;
    background-size: 100%;
    height: 100px;
    width: 100px;
    position: fixed;
    left: 35%;
    top: 35%;
}

.ivu-input-number-handler-up-inner {

    display: none;
}

.invalid {
    position: absolute;
    top: 0.12rem;
    /* left: 10px; */
    width: 100%;
    height: 100%;
    /* margin: 0 auto; */
    text-align: center;
}

.soldout {
    height: 100px;
    width: 100px;
    position: absolute;
    top: 0;
    padding-top: 0.3rem;
    padding-left: 0.3rem;
}





/*@import "~assets/font/iconfont.css";*/
</style>


<template>
    <div>
        <div class="back" id="back" v-if="number==undefined"> </div>
        <div v-if="cart_list" v-for="(v, k) in cart_list">
            <div class="Vacancy" v-if="v.goods_list.length > 0"></div>
            <yd-flexbox class="choice" v-if="v.goods_list.length > 0">
                <yd-checkbox v-model="checkbox[v.seller_id]" :change="evevt=>{change(evevt, {seller_id: v.seller_id, goods_id: getGoodsIds(v.seller_id)}, 1)}" :disabled="checkIsDisabled(v.shop_status, 1)" color="#ff4500"></yd-checkbox>
                <a :href="'/'+v.shop_name.replace(/ /g,'_')">
                    <div class="mars">{{v.shop_name}}</div>
                </a>
                <yd-flexbox-item>
                    <i class="iconfont icon-552cc1babd9aa" style="    font-size: 0.48rem;"></i>
                </yd-flexbox-item>
                <!-- 优惠券 -->
                <yd-button class="coupons" v-if="v.coupon.length > 0" @click.native="toShow2(v.shop_name, v.coupon)">Coupons</yd-button>
            </yd-flexbox>

            <yd-flexbox class="trade" v-for="(vv, kk) in v.goods_list" :key="kk">
                <yd-checkbox v-model="checkbox1[vv.goods_id]" :ref="`checkbox1_${parseInt(vv.goods_id)}`" :change="evevt=>{change(evevt, {goods_id: vv.goods_id, seller_id: v.seller_id}, 2)}" :disabled="checkIsDisabled({shop: v.shop_status, num: vv.store_nums, is_del: vv.is_del, promo: vv.promo, count: vv.count}, 2)" color="#ff4500" :key="vv.goods_id"></yd-checkbox>
                <div class="only">
                    <a :href="`products.html?id=${vv.goods_id}&promo=${vv.promo==undefined ? '' : vv.promo}`">
                        <img :src="vv.img" alt="" class="Commodity">
                    </a>
                    <div class="flash_sale" v-if="vv.promo == 'time' && Number(vv.is_del)<2">
                        <img src="../../assets/images/not_refactoring/cart_image_flalshsale.png" alt="">
                    </div>
                    <div v-if="Number(vv.store_nums) != 0">
                        <div class="quantity" v-if="(Number(vv.count) > Number(vv.store_nums) || Number(vv.store_nums) <= 5)&&(vv.promo != 'time' && Number(vv.is_del)<2)">
                            Only {{Number(vv.store_nums)}} Left
                        </div>
                    </div>
                    <div class="soldout" v-if=" Number(vv.store_nums) == 0 && vv.promo != 'time' && Number(vv.is_del)<2">
                        <img src="../../assets/images/not_refactoring/cart_image_soldout.png" alt="">
                    </div>
                    <div class="invalid" v-if="Number(vv.is_del)==2">
                        <img src="../../assets/images/not_refactoring/cart_image_invalid.png" alt="" style="padding-top: 0.2rem;">
                    </div>
                    <div class="invalid" v-if="Number(vv.is_del)==3">
                        <img src="../../assets/images/not_refactoring/cart_image_invalid.png" alt="" style="padding-top: 0.2rem;">
                    </div>
                </div>

                <yd-flexbox-item>
                    <yd-flexbox-item class="multitool">
                        <yd-flexbox>
                            <div class="introduce">{{vv.name}}</div>
                            <yd-button @click.native="del_info = {goods_id: vv.goods_id, product_id: vv.product_id, k ,kk}; del_show = true" style="    background-color: #fff;color: #000;">
                                <i class="iconfont icon-delete" style="    font-size: 0.48rem;"></i>
                            </yd-button>
                        </yd-flexbox>
                    </yd-flexbox-item>
                    <yd-flexbox-item class="specification" v-if="vv.spec_array">
                        <span v-for="spec in vv.spec_array">{{`${spec.name}: ${spec.value}`}}</span>
                    </yd-flexbox-item>

                    <!--加减库存 flash的就是view now-->
                    <yd-flexbox-item v-if="vv.promo === 'time'">
                        <yd-flexbox>
                            <yd-flexbox-item>
                                <h4 style="font-size: 0.32rem;color: #ff4500">₱{{vv.sell_price}}</h4>
                            </yd-flexbox-item>
                            <yd-flexbox-item>
                                <div class="viewnow">
                                    <!-- <a :href="getGoodsUrl(vv.goods_id)">View Now</a> -->
                                    <a :href="'/site/products?id='+vv.goods_id+'&promo='+vv.promo">View Now</a>
                                </div>
                            </yd-flexbox-item>
                        </yd-flexbox>
                    </yd-flexbox-item>

                    <yd-flexbox-item v-else>
                        <yd-flexbox>
                            <yd-flexbox-item>
                                <h4 style="font-size: 0.32rem;color: #ff4500">₱{{vv.sell_price}}</h4>
                            </yd-flexbox-item>
                            <yd-flexbox-item>
                                <v-spinner :max="vv.count > vv.store_nums ? Number(parseInt(vv.count)) : Number(parseInt(vv.store_nums))" :min="1" :other="{seller_id: v.seller_id, goods_id: vv.goods_id, k: k, kk: kk, promo: vv.promo, product_id: vv.product_id}" :precision="0" @on-change="checkDiff" :value="vv.count"></v-spinner>
                            </yd-flexbox-item>
                        </yd-flexbox>
                    </yd-flexbox-item>

                </yd-flexbox-item>
            </yd-flexbox>
        </div>

        <!-- No more products  没有更多产品 -->
        <yd-flexbox direction="vertical" class="no_more" v-else>
            <yd-flexbox-item>No more products</yd-flexbox-item>
        </yd-flexbox>

        <yd-flexbox class="Out">
            <yd-checkbox v-model="checkboxAll" :change="evevt=>{change(evevt, '', 3)}" color="#ff4500"></yd-checkbox>
            <div class="tvmall">Select All</div>
            <yd-flexbox-item class="subtotal">
                <span>subtotal:</span>
                <span style="font-size: 0.32rem;color: #ff4500">₱{{final_sum}}</span>
            </yd-flexbox-item>
            <div class="Oheck">
                <yd-button @click.native="toCheckOut()" class="outl">Check Out
                    <span v-if="getCount > 0">({{getCount}})</span>
                </yd-button>
                <!-- 结算失败 -->
                <yd-popup v-model="show1" position="center" width="90%">
                    <yd-flexbox direction="vertical" class="Check_order">
                        <yd-flexbox-item class="Check">Check Out This Order Failed</yd-flexbox-item>
                        <yd-flexbox-item class="Possible">Possible Reasons:</yd-flexbox-item>
                    </yd-flexbox>
                    <yd-flexbox direction="vertical" class="Check_order">
                        <yd-flexbox-item class="Order" v-for="(v, k) in checkErrorMsg" :key="k">{{`${k+1}: ${v.msg}`}}</yd-flexbox-item>
                    </yd-flexbox>
                    <yd-flexbox direction="vertical" class="Check_order">
                        <yd-flexbox-item class="again">You can check out again</yd-flexbox-item>
                    </yd-flexbox>
                    <yd-flexbox direction="vertical" class="" @click.native="show1 = false">
                        <yd-flexbox-item class="Done">Done</yd-flexbox-item>
                    </yd-flexbox>

                </yd-popup>

            </div>

        </yd-flexbox>

        <yd-popup v-model="del_show" position="center" width="90%">
            <yd-flexbox direction="vertical" class="">
                <yd-flexbox-item class="remove">Are you sure you want remove this product？
                </yd-flexbox-item>
            </yd-flexbox>

            <yd-flexbox class="Done">
                <yd-flexbox-item @click.native="del_show = false">Cancel</yd-flexbox-item>
                <yd-flexbox-item @click.native="del_ok" class="undock">Remove
                </yd-flexbox-item>
            </yd-flexbox>
        </yd-popup>

        <yd-popup v-model="show2" position="bottom" height="60%">
            <yd-flexbox direction="vertical">
                <yd-flexbox-item>
                    <yd-flexbox>
                        <yd-flexbox-item class="mars">{{coupons_name}}</yd-flexbox-item>
                        <yd-button type="warning" class="close" @click.native="show2 = false">X</yd-button>
                    </yd-flexbox>
                </yd-flexbox-item>
                <yd-flexbox-item class="hint">Tips:Flash sale can't use coupon.</yd-flexbox-item>
                <yd-flexbox-item style="height: 14px;background-color: #f2f2f2;"></yd-flexbox-item>

                <yd-flexbox-item class="promotion_code" v-for="(coupon, k) in coupons_arr" v-if="coupons_arr.length > 0 && coupon.can_be_used" :key="k">
                    <yd-flexbox>
                        <div class="setting">
                            <yd-flexbox direction="vertical">
                                <yd-flexbox-item class="Shippings">{{coupon.value_text}}</yd-flexbox-item>
                                <!--<yd-flexbox-item class="prices">₱-->
                                <!--<span style=" font-size: 22px;">100</span>-->
                                <!--</yd-flexbox-item>-->
                                <yd-flexbox-item class="more">{{coupon.limit_text}}</yd-flexbox-item>
                            </yd-flexbox>
                        </div>
                        <yd-flexbox-item>
                            <yd-flexbox direction="vertical" style="background-color: #fff;">
                                <yd-flexbox-item class="scope">Can be usde on:</yd-flexbox-item>
                                <yd-flexbox-item class="validity">{{coupon.valid_time}}</yd-flexbox-item>
                                <yd-flexbox-item class="identification"><img src="../../assets/images/not_refactoring/cart_image_canbeused.png" alt="">
                                </yd-flexbox-item>
                            </yd-flexbox>
                        </yd-flexbox-item>
                    </yd-flexbox>
                </yd-flexbox-item>

                <yd-flexbox-item style="height: 8px;background-color: #f2f2f2;"></yd-flexbox-item>
            </yd-flexbox>
        </yd-popup>

    </div>
</template>

<script type="text/babel">
import v_spinner from '../commonality/spinner'
import { mapGetters } from 'vuex'
import { goodsUrl, deleteArrByKey } from '../../assets/help/utils'
import { api } from '@/utils/api/apis.js'//这个是访问数据页面的api
import service from '@/utils/fetch.js'//这是一个封装好的请求方法axios
import qs from 'qs'
import querystring from 'querystring'
import { mapActions } from 'vuex'
export default {
    data() {
        return {
            checkbox: [],
            checkbox1: [],
            spinner1: 0,
            show1: false,
            show2: false,
            checkboxAll: false,
            del_info: '',
            del_show: false,
            final_sum: 0,
            coupons_name: '',
            coupons_arr: [],
            checkErrorMsg: [],
            count: '',
        }
    },
    computed: {
        ...mapGetters([
            'cart_list', 'number'
        ]),
        getCount() {
            let temp = [];
            this.checkbox1.forEach((v, k) => {
                if (v) temp.push(k);
            });
            return temp.length
        }
    },
    created() {

    },
    watch: {
        cart_list() {


        },
        checkbox() {
            this.checkAll();
        },
        checkbox1() {
            this.checkAll();
        },
        number() {

        },

    },
    components: {
        'v-spinner': v_spinner
    },
    methods: {
        checkDiff(val) {
            this.$dialog.loading.open('Loading');
            let old = this.cart_list[val.other.k].goods_list[val.other.kk].count;
            // set
            this.cart_list[val.other.k].goods_list[val.other.kk].count = val.data;
            let type = parseInt(val.other.product_id) === 0 ? 'goods' : 'product';
            // 购物车加减
            var param = qs.stringify({ id: type === 'product' ? parseInt(val.other.product_id) : parseInt(val.other.goods_id), type: type, num: val.data });
            service.post(api.contract + 'api/v1/cart/changeCartNum', param).then(({ status, data }) => {
                if (status === 200) {
                    this.getFS();
                    this.$dialog.loading.close();
                    this.count = { status, data }.data.data.count
                    this.$store.state.count = this.count;
                }
            })
        },
        checkIsDisabled(v, type) {
            if (type === 1) {
                // 店铺
                return parseInt(v) === 2 ? true : false
            } else {
                // 商品 shop: v.shop_status, num: v.store_nums, is_del: vv.is_del, promo: vv.promo
                return (parseInt(v.shop) === 2 || parseInt(v.num) === 0 || parseInt(v.is_del) > 0 || v.promo === 'time' || Number(v.count) > Number(v.num))
                    ? true : false
            }
        },
        getGoodsUrl(id) {
            return goodsUrl(id)
        },
        getGoodsIds(seller_id) {
            let value = [];
            this.cart_list.forEach((v, k) => {
                if (v.seller_id === seller_id) value = v.goods_list
            });
            let goods_ids = [];
            value.forEach((v, k) => {
                goods_ids.push(v.goods_id)
            });
            return goods_ids;
        },
        change(event, value, type) {
            if (type === 1) {
                // 店铺
                value.goods_id.forEach((v, k) => {
                    if (!this.$refs[`checkbox1_${parseInt(v)}`][0].disabled) this.checkbox1[v] = !this.checkbox[value.seller_id]
                })
            } else if (type === 2) {
                // 商品
                this.checkbox1[value.goods_id] = !this.checkbox1[value.goods_id];
                this.checkbox[value.seller_id] = !this.checkAllDisabled(value.seller_id);
            } else {
                // all
                this.cart_list.forEach((v, k) => {
                    if (!this.checkIsDisabled(v.shop_status, 1)) this.checkbox[v.seller_id] = !this.checkboxAll;
                    v.goods_list.forEach((v1, k1) => {
                        if (!this.$refs[`checkbox1_${parseInt(v1.goods_id)}`][0].disabled) this.checkbox1[v1.goods_id] = !this.checkboxAll
                    })
                });
            }
        },
        checkAllDisabled(seller_id) {
            let goods_ids = this.getGoodsIds(seller_id);
            let temp = 0;
            goods_ids.forEach((v, k) => {
                if (this.checkbox1[v]) temp = 1;
            });

            if (temp === 1)
                return false;
            return true
        },
        checkAll() {
            let temp1 = [];
            let temp2 = [];
            this.checkbox.forEach((v, k) => {
                v ? temp1.push(v) : ''
            });
            this.checkbox1.forEach((v, k) => {
                !v ? temp2.push(v) : ''
            });
            if (temp1.length === this.cart_list.length && temp2.length === 0)
                this.checkboxAll = true;
            if (temp1.length < this.cart_list.length || temp2.length > 0)
                this.checkboxAll = false;

            this.getFS();
        },
        del_ok() {
            let type = parseInt(this.del_info.product_id) === 0 ? 'goods' : 'product';
            // 购物车删除商品
            var param = qs.stringify({ id: type === 'product' ? parseInt(this.del_info.product_id) : parseInt(this.del_info.goods_id), type: type });
            service.post(api.contract + 'api/v1/cart/removeCart', param).then(({ status, data }) => {
                if (status === 200) {
                    if (status === 200) {
                        this.cart_list[this.del_info.k].goods_list.splice(this.del_info.kk, 1);
                        this.checkbox1 = deleteArrByKey(this.checkbox1, this.del_info.goods_id);
                        this.del_show = false
                        location.reload();
                    }
                }
            })

        },
        getFS() {
            let arr = [];
            this.checkbox1.forEach((v, k) => {
                if (v) arr.push(parseInt(k))
            });

            let sum = 0;
            this.cart_list.forEach((v, k) => {
                v.goods_list.forEach((v1, k1) => {
                    if (arr.indexOf(parseInt(v1.goods_id)) > -1)
                        sum += v1.sell_price * v1.count
                })
            });

            this.final_sum = sum
        },
        toShow2(name, c) {
            this.show2 = true;
            this.coupons_name = name;
            this.coupons_arr = c
        },
        toCheckOut() {
            let temp = []
            this.checkbox1.forEach((v, k) => {
                if (v) temp.push(parseInt(k))
            })
            if (temp.length <= 0) {
                this.checkErrorMsg = []
                this.checkErrorMsg.push({
                    msg: 'Please choose the goods first'
                })
                this.show1 = true
                return false
            }

            let seller = [];
            this.checkbox.forEach((v, k) => {
                if (v) seller.push(parseInt(k))
            })
          
                // location
                let jsonData = {};
                let arr = [];
                let arr1 = [];
                this.cart_list.forEach((v, k) => {
                    v.goods_list.forEach((v1, k1) => {
                        if (temp.indexOf(parseInt(v1.goods_id)) > -1) {
                            // let type = parseInt(v1.product_id) === 0 ? 'goods' : 'product'
                            // arr += `${arr === '' ? '' : ','}${type}_${type === 'goods' ? v1.goods_id : v1.product_id}`
                            arr.push(v1.goods_id)
                            arr1.push(v1.product_id)
                            jsonData.goods=arr
                             jsonData.product=arr1
                        }
                    })
                })
                var cart2 = JSON.stringify(jsonData);
                localStorage.setItem('cart2', cart2);
                var storage = window.localStorage;
                var nothing2 = {
                    nature: 0,
                }
                localStorage.setItem('str1', JSON.stringify(nothing2))
                location.href = "order.html";
          
            // let jsonData = {};
            // let arr = [];
            // this.cart_list.forEach((v, k) => {
            //     v.goods_list.forEach((v1, k1) => {
            //      arr.push(v1.goods_id)
            //     jsonData.goods=arr

            //         // console.log(v1.product_id)  
            //     })
            // })
            //   console.log(jsonData)
            // localStorage.setItem('cart2', arr);
            // var storage = window.localStorage;
            // var nothing2 = {
            //     nature: 0,
            // }
            // localStorage.setItem('str1', JSON.stringify(nothing2))
            // location.href = "/simple/cart2";



        }
    }

}
</script>

